unbind r
bind r source-file ~/.tmux.conf

bind c new-window -c "#{pane_current_path}"
bind '\' split-window -c "#{pane_current_path}"
bind | split-window -h -c "#{pane_current_path}"
bind o new-window -n notes -c ~/vaults/notes "nvim ."

set -g default-terminal "${TERM}"
set -ag terminal-overrides ",kitty:Tc"

set -s escape-time 0
set -g prefix C-a
set -g mouse on
set -g base-index 1
setw -g pane-base-index 1
# set -g renumber-windows on

bind-key h select-pane -L
bind-key j select-pane -D
bind-key k select-pane -U
bind-key l select-pane -R

set-option -g status-position top

# Avoid to renumber windows when deleting and creating new ones
set-option -g renumber-windows off

# Allow images on tmux
set-option -g allow-passthrough on

set -g @catppuccin_flavor "mocha"
set -g @catppuccin_window_status_style "rounded"

# Set currently app name on window title
set -g @catppuccin_window_text " #W"
set -g @catppuccin_window_current_text " #W"

# List of plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'catppuccin/tmux'

set -g status-left ""

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

set -g status-style bg=default

# Pane divider color (should be before tpm to override catppuccin)
set -g pane-border-status top
set -g pane-border-format ""

set -g pane-border-style "fg=#1E1D2F"   # Change to a light gray
set -g pane-active-border-style "fg=#3c3a5c"  # Change active border to red

set -g status-interval 1

# Copilot usage
set -gF "@copilot_color" "#{E:@thm_lavender}"
set -g "@copilot_text" "#(~/dotfiles/bin/copilot-usage)"

set -gF "@copilot_left_separator" "#[fg=#{E:@copilot_color}]#{E:@catppuccin_status_left_separator}"
set -gF "@copilot_icon" "#[bg=#{E:@copilot_color},fg=black]ï’¸ "
set -gF "@copilot_usage" "#[bg=#{E:@thm_surface_0},fg=white] #{E:@copilot_text}"

set -gF "@copilot" "#{E:@copilot_left_separator}#{E:@copilot_icon}#{E:@copilot_usage}"

set -g status-right "#{E:@copilot} #{E:@catppuccin_status_application} #{E:@catppuccin_status_session}"
